<app-custom-res style="display: none" [model]="{
  url:'dish',
  select: '-__v',
  query:{dishcategory: categoryId},
  populate: {path:'portion'}
}"
(onRes)="onapi($event)"></app-custom-res>

<ng-container *ngIf="dishes">
  <div class="mn_i-c">
    <ng-container *ngFor="let dish of dishes;">

      <section class="mn_i" >
        <div class="mn_i_pr">
          <div class="mn_i_img">
            <div class="pr_ev">
              <span class="pr_ev-s ev-s_new" *ngIf="dish.isnew"></span>
              <span class="pr_ev-s ev-s_xit" *ngIf="dish.ishit"></span>
              <!--<span class="pr_ev-s ev-s_int"></span>-->
            </div>
            <ng-container *ngIf="dish.pic">
              <app-img [img]="{id:dish.pic}" ></app-img>
            </ng-container>
            <ng-container *ngIf="!dish.pic">
              <app-prev-dish></app-prev-dish>
            </ng-container>
          </div>

          <app-pop-prod-add *ngIf="dish.prt"
                            [dish]="dish"
                            [dishId]="dish._id"
                            [selfBtn]="true"></app-pop-prod-add>
        </div>


        <div class="mn_i_in">
          <div>
            <h1 class="mn_i_ht c_t14">{{dish.name}}</h1>
            <p class="mn_i_d c_t o8">{{dish.about}}</p>
            <div class="mn_i_of">

              <div class="mn_i_of_i">
                <ng-container *ngIf="dish.prt">
                  <ng-container *ngIf="dish.portion.length >= 1">
                    {{dish.prt.name || ''}}<span style="margin-left: 4px" *ngIf="dish.prt.massa">{{dish.prt.massa}}</span>
                  </ng-container>
                  <ng-container *ngIf="dish.portion.length < 1">
                    <div class="select-tr" #isSelect>
                      <div class="select-wrapper initialized" [ngClass]="{'active': isSelect.val}">
                        <button class="select-dropdown btn-border"
                                [ngClass]="{'active': isSelect.val}"
                                (click)="isSelect.val = true">{{dish.prt.name || dish.prt.massa}}</button>
                        <ul class="dropdown-content select-dropdown" [ngClass]="{'active': isSelect.val}">
                          <li *ngFor="let prt of dish.portion" (click)="select(prt, dish);isSelect.val = false">
                            <span>{{prt.name}} {{prt.massa}}</span>
                          </li>
                        </ul>
                        <svg class="caret" viewBox="0 0 129 129" enable-background="new 0 0 15 15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px"><g><path d="m121.3,34.6c-1.6-1.6-4.2-1.6-5.8,0l-51,51.1-51.1-51.1c-1.6-1.6-4.2-1.6-5.8,0-1.6,1.6-1.6,4.2 0,5.8l53.9,53.9c0.8,0.8 1.8,1.2 2.9,1.2 1,0 2.1-0.4 2.9-1.2l53.9-53.9c1.7-1.6 1.7-4.2 0.1-5.8z"></path></g></svg>
                      </div>
                    </div>
                  </ng-container>
                </ng-container>
              </div>
              <div class="mn_i_of_i1" [class.new]="false">
                <!--<span class="c_t14"></span>-->
                <span class="c_t14" *ngIf="dish.prt">{{dish.prt.price}}грн</span>
              </div>
            </div>

          </div>

          <div class="mn_i_btn">
            <div class="cmp-btn">
              <button class="btn0" (click)="liked(dish)">
                <span class="btn_svg">
                  <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 50 50" width="16" height="16"><path style="fill:#D75A4A;" d="M24.85,10.126c2.018-4.783,6.628-8.125,11.99-8.125c7.223,0,12.425,6.179,13.079,13.543c0,0,0.353,1.828-0.424,5.119c-1.058,4.482-3.545,8.464-6.898,11.503L24.85,48L7.402,32.165c-3.353-3.038-5.84-7.021-6.898-11.503c-0.777-3.291-0.424-5.119-0.424-5.119C0.734,8.179,5.936,2,13.159,2C18.522,2,22.832,5.343,24.85,10.126z"></path></svg>
                </span>
                <span class="btn_val">{{dish.dishlike ? dish.dishlike.length : ' '}}</span>
              </button>
            </div>
            <div class="cmp-btn">
              <button class="btn0">
                <span class="btn_svg">
                  <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 511.62 511.619" width="16" height="16"><path d="M301.923,327.602c30.93-13.038,55.34-30.785,73.228-53.248c17.891-22.458,26.837-46.915,26.837-73.372c0-26.458-8.946-50.914-26.837-73.376c-17.888-22.459-42.298-40.208-73.228-53.249c-30.93-13.039-64.571-19.556-100.928-19.556c-36.354,0-69.995,6.521-100.927,19.56C69.14,87.4,44.729,105.149,26.84,127.609C8.947,150.068,0,174.523,0,200.982c0,22.648,6.764,43.975,20.276,63.957c13.512,19.985,32.071,36.833,55.671,50.535c-1.902,4.572-3.853,8.754-5.852,12.566c-2,3.806-4.377,7.467-7.139,10.991c-2.76,3.525-4.899,6.283-6.423,8.275c-1.523,1.998-3.997,4.809-7.424,8.422c-3.428,3.617-5.618,5.996-6.567,7.135c0-0.191-0.383,0.24-1.143,1.287c-0.763,1.047-1.191,1.52-1.287,1.431c-0.094-0.103-0.476,0.373-1.141,1.42c-0.666,1.048-1,1.571-1,1.571l-0.715,1.423c-0.284,0.568-0.476,1.137-0.57,1.712c-0.096,0.567-0.144,1.19-0.144,1.854s0.094,1.28,0.286,1.854c0.383,2.471,1.477,4.466,3.284,5.996c1.809,1.52,3.757,2.279,5.854,2.279h0.857c9.515-1.332,17.701-2.854,24.552-4.569c29.312-7.614,55.771-19.797,79.372-36.545c17.128,3.046,33.88,4.568,50.248,4.568C237.349,347.156,270.994,340.641,301.923,327.602z M142.184,303.767l-12.564,8.846c-5.33,3.614-11.227,7.331-17.7,11.14l9.995-23.986l-27.694-15.988c-18.276-10.656-32.454-23.219-42.542-37.685c-10.089-14.465-15.131-29.502-15.131-45.111c0-19.417,7.474-37.594,22.414-54.534c14.938-16.94,35.067-30.358,60.382-40.259c25.313-9.895,52.532-14.847,81.653-14.847c29.121,0,56.342,4.952,81.654,14.847c25.313,9.9,45.442,23.319,60.388,40.259c14.94,16.939,22.408,35.116,22.408,54.534c0,19.414-7.468,37.59-22.408,54.53c-14.945,16.945-35.074,30.36-60.388,40.256c-25.312,9.897-52.53,14.846-81.654,14.846c-14.272,0-28.833-1.335-43.681-3.997L142.184,303.767z"></path><path d="M491.347,338.156c13.518-19.896,20.272-41.255,20.272-64.098c0-23.411-7.139-45.303-21.409-65.666c-14.277-20.362-33.694-37.305-58.245-50.819c4.374,14.274,6.563,28.739,6.563,43.398c0,25.503-6.368,49.676-19.129,72.519c-12.752,22.836-31.025,43.01-54.816,60.524c-22.08,15.988-47.205,28.261-75.377,36.829c-28.164,8.562-57.573,12.848-88.218,12.848c-5.708,0-14.084-0.377-25.122-1.137c38.256,25.119,83.177,37.685,134.756,37.685c16.371,0,33.119-1.526,50.251-4.571c23.6,16.755,50.06,28.931,79.37,36.549c6.852,1.718,15.037,3.237,24.554,4.568c2.283,0.195,4.381-0.476,6.283-1.995c1.903-1.526,3.142-3.614,3.71-6.276c-0.089-1.143,0-1.77,0.287-1.861c0.281-0.09,0.233-0.712-0.144-1.852c-0.376-1.144-0.568-1.715-0.568-1.715l-0.712-1.424c-0.198-0.376-0.52-0.903-0.999-1.567c-0.476-0.66-0.855-1.14-1.143-1.427c-0.28-0.284-0.705-0.763-1.28-1.424c-0.568-0.66-0.951-1.092-1.143-1.283c-0.951-1.143-3.139-3.521-6.564-7.139c-3.429-3.613-5.899-6.42-7.422-8.418c-1.523-1.999-3.665-4.757-6.424-8.282c-2.758-3.518-5.14-7.183-7.139-10.991c-1.998-3.806-3.949-7.995-5.852-12.56C459.281,374.855,477.843,358.059,491.347,338.156z"></path></svg>
                </span>
                <span class="btn_val"> </span>
              </button>
            </div>
            <!--<div class="cmp-btn">-->
              <!--<button class="btn0">-->
                <!--<span class="btn_svg">-->
                 <!--<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 487.958 487.958" width="16" height="16"><path d="M483.058,215.613l-215.5-177.6c-4-3.3-9.6-4-14.3-1.8c-4.7,2.2-7.7,7-7.7,12.2v93.6c-104.6,3.8-176.5,40.7-213.9,109.8c-32.2,59.6-31.9,130.2-31.6,176.9c0,3.8,0,7.4,0,10.8c0,6.1,4.1,11.5,10.1,13.1c1.1,0.3,2.3,0.4,3.4,0.4c4.8,0,9.3-2.5,11.7-6.8c73-128.7,133.1-134.9,220.2-135.2v93.3c0,5.2,3,10,7.8,12.2s10.3,1.5,14.4-1.8l215.4-178.2c3.1-2.6,4.9-6.4,4.9-10.4S486.158,218.213,483.058,215.613z M272.558,375.613v-78.1c0-3.6-1.4-7-4-9.5c-2.5-2.5-6-4-9.5-4c-54.4,0-96.1,1.5-136.6,20.4c-35,16.3-65.3,44-95.2,87.5c1.2-39.7,6.4-87.1,28.1-127.2c34.4-63.6,101-95.1,203.7-96c7.4-0.1,13.4-6.1,13.4-13.5v-78.2l180.7,149.1L272.558,375.613z"></path></svg>-->
                <!--</span>-->
                <!--<span class="btn_val"> </span>-->
              <!--</button>-->
            <!--</div>-->
          </div>
        </div>
      </section>
    </ng-container>
  </div>

</ng-container>

