
<article #createP class="cr-cont" isMyProfile [appCreatePost]="false">

  <form class="cont cr-pst" isMyProfile>

    <div class="img60">
      <ng-container *ngIf="avatar">
        <app-picture [pic]="avatar"></app-picture>
        <!--<img class="inherit" src="{{avatar.picCrop}}">-->
      </ng-container>
      <ng-container *ngIf="!avatar">
        <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 427 448" fill="none"> <path fill-rule="evenodd" clip-rule="evenodd" d="M215.34 0C168.307 0 129.702 40.8497 129.702 91.2309C129.702 98.8398 131.649 107.861 134.957 117.694C127.707 118.105 122.24 116.796 118.555 115.741C109.541 113.351 106.99 109.925 106.113 108.746L106.05 108.661C105.234 107.571 103.875 105.393 104.146 102.942C104.292 101.488 104.902 100.578 105.397 99.8374C105.83 99.1911 106.176 98.6747 106.05 98.0399C105.506 96.1335 101.156 95.0442 97.8936 96.6782C94.0875 98.3122 93 102.942 93 105.937C93 109.75 95.1749 112.473 96.5343 113.835C97.3498 114.924 100.34 118.192 106.865 119.826C118.827 123.094 131.061 119.282 135.683 117.648L135.394 117.668C143.128 116.247 151.605 114.514 160.423 111.929C175.919 107.299 189.241 101.853 200.115 96.6784C199.843 94.2274 200.659 92.5934 201.746 92.3211C201.746 92.3211 202.562 92.3211 203.378 92.8658C203.378 89.5978 203.921 83.8788 207.184 77.8876C211.653 68.6708 219.426 64.8014 222.393 63.3247L222.68 63.1817C234.37 57.4627 254.76 55.8287 261.557 66.722C268.082 77.0706 258.838 96.6784 244.429 104.304C228.144 112.849 210.876 103.421 208.282 102.005L208.28 102.004C208.147 101.931 208.053 101.879 207.999 101.853C207.456 102.942 206.368 103.759 205.281 103.759C203.921 103.759 202.562 102.942 202.29 101.308C187.609 110.84 174.56 116.831 164.773 120.644C153.456 125.052 145.37 127.033 138.771 127.959C156.889 172.842 196.997 229.224 210.718 247.549C212.893 250.817 217.514 250.817 219.689 247.549C234.107 227.997 278.927 165.119 294.943 119.111C290.847 121.109 286.175 123.103 280.859 124.999C270.529 128.812 255.304 132.897 236.002 133.986C236.273 136.165 236.002 138.071 234.914 138.344C234.37 138.616 233.283 137.799 232.467 136.71C231.108 144.607 220.777 155.5 202.562 161.492C191.144 165.304 181.357 166.394 175.376 166.121C172.929 166.394 171.026 166.394 170.754 165.849C170.754 165.577 172.385 164.487 174.56 163.398C182.036 160.675 189.105 158.019 195.63 155.568C202.154 153.117 208.135 150.871 213.437 148.965L213.165 147.875C209.662 148.928 205.82 149.981 201.713 151.106L201.712 151.107L201.711 151.107L201.71 151.107C199.443 151.728 197.095 152.372 194.678 153.049C191.008 154.003 187.406 155.024 183.804 156.045C180.201 157.066 176.599 158.088 172.929 159.041C170.21 159.313 168.035 158.768 167.763 157.951C167.491 157.134 169.395 155.773 171.841 154.956C178.495 152.576 184.785 150.247 190.688 148.062L190.689 148.062L190.691 148.061C198.295 145.246 205.259 142.668 211.534 140.522L211.262 139.433C207.598 140.592 203.387 141.751 198.823 143.007L198.82 143.008L198.815 143.009C196.947 143.523 195.02 144.054 193.047 144.607C189.377 145.56 185.774 146.582 182.172 147.603C178.57 148.624 174.968 149.645 171.298 150.598C168.579 151.143 166.404 150.871 166.132 150.054C165.86 149.237 167.491 147.875 169.938 146.786C177.415 144.063 184.483 141.407 191.008 138.956C197.533 136.505 203.514 134.259 208.815 132.352L208.543 131.263C205.039 132.316 201.197 133.369 197.088 134.495C194.821 135.116 192.473 135.759 190.056 136.437C188.689 136.843 187.331 137.249 185.979 137.653L185.971 137.655L185.966 137.657C180.065 139.421 174.276 141.151 168.307 142.701C167.763 142.973 163.957 144.063 163.685 143.246C163.468 142.374 165.686 140.805 166.722 140.073C166.98 139.89 167.165 139.76 167.22 139.705C174.288 134.531 182.444 130.174 191.959 127.178C209.902 121.187 224.855 124.455 230.564 129.629C230.564 127.995 230.836 126.633 231.652 126.361C232.467 126.089 233.827 127.45 234.914 129.357C243.886 127.45 257.479 123.91 272.975 117.646L272.976 117.646C275.694 116.557 278.413 115.468 280.588 114.378C287.439 111.437 293.499 108.712 298.731 106.277C300.005 100.842 300.705 95.7835 300.705 91.2309C300.977 40.8497 262.644 0 215.34 0ZM312.668 93.6814C309.677 96.9493 305.055 101.579 298.802 106.209C304.783 104.03 316.745 98.8557 325.989 89.5964C329.251 86.0561 331.698 82.5158 332.514 77.6138C333.057 75.7075 333.601 71.8949 331.426 68.6269C329.523 65.9036 325.989 62.9079 321.639 63.9973C317.561 64.8143 314.027 68.8992 314.571 70.8055C314.848 71.6378 315.618 71.9049 316.523 72.2185C317.395 72.5206 318.392 72.8659 319.192 73.8012C319.213 73.8418 319.237 73.8885 319.266 73.9419C319.617 74.6033 320.511 76.2846 320.008 80.0648C319.192 85.2391 316.202 89.3241 312.668 93.6814Z" fill="#C3C3C3"/> <path d="M371.4 290.3C319.2 270.4 288 250 288 250L247.8 377.2L242.3 394.4L224.3 343.4C265.7 285.7 221.2 282.9 213.4 282.9H213.3H213.2H213.1H213C205.3 283 160.8 285.7 202.2 343.4L184.2 394.4L178.7 377.2L138.5 250C138.5 250 107.3 270.4 55.1 290.3C-2.4 311.2 1.2 358.5 0 447.1H213.1H213.6H426.7C425.3 358.5 428.8 311.2 371.4 290.3Z" fill="#C3C3C3"/> </svg>
      </ng-container>
    </div>

    <div class="cr-pst_us">
      <strong class="name">{{firstName}}</strong>
      <span *ngIf="active"> почувається {{active}}</span>
      <span *ngIf="postObg.img.length > 0 && !active"> додав(ла) фото</span>
      <span *ngIf="postObg.withFriend[0]"> разом з
        <span *ngFor="let friend of postObg.withFriend; let i = index" class="us_chip" (click)="delet(i)">
          {{friend.firstName}}
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" x="0px" y="0px" viewBox="0 0 47.971 47.971" fill="#818181"><path d="M28.228,23.986L47.092,5.122c1.172-1.171,1.172-3.071,0-4.242c-1.172-1.172-3.07-1.172-4.242,0L23.986,19.744L5.121,0.88c-1.172-1.172-3.07-1.172-4.242,0c-1.172,1.171-1.172,3.071,0,4.242l18.865,18.864L0.879,42.85c-1.172,1.171-1.172,3.071,0,4.242C1.465,47.677,2.233,47.97,3,47.97s1.535-0.293,2.121-0.879l18.865-18.864L42.85,47.091c0.586,0.586,1.354,0.879,2.121,0.879s1.535-0.293,2.121-0.879c1.172-1.171,1.172-3.071,0-4.242L28.228,23.986z"/></svg>
        </span>
      </span>
      <span *ngIf="placeActive"> у
        <span class="us_chip">
          {{placeActive}}
        </span>
      </span>
    </div>

    <div class="cr-pst_cm">
      <div #txtFnt class="cr-pst_fnt">{{postObg.des}}</div>
      <textarea id="crPst-area"
                #desIn
                placeholder="Поділіться своїми враженнями..."
                (resize)="desIn.style.height = txtFnt.offsetHeight + 'px'"
                [(ngModel)]="postObg.des" name="des"
                [style.height.px]="txtFnt.offsetHeight"></textarea>
      <label class="cr-pst_lb" [class.true]="postObg.des" for="crPst-area" #des>{{postObg.des || 'Поділіться своїми враженнями'}}</label>
    </div>

    <div class="cr-pst_img" *ngIf="postObg.img.length > 0">
      <div class="cr-pst_img_i" *ngFor="let img of postObg.img; let i = index">
        <img class="img" src="{{img.base64crop}}">
        <div class="cr-pst_img_btn-cn">
          <button class="btn-trans cr-pst_img_btn" (click)="rotate(i, -90)">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="15" height="15"><path fill="#333333" d="M8 0c-3 0-5.6 1.6-6.9 4.1l-1.1-1.1v4h4l-1.5-1.5c1-2 3.1-3.5 5.5-3.5 3.3 0 6 2.7 6 6s-2.7 6-6 6c-1.8 0-3.4-0.8-4.5-2.1l-1.5 1.3c1.4 1.7 3.6 2.8 6 2.8 4.4 0 8-3.6 8-8s-3.6-8-8-8z"></path></svg>
          </button>
          <button class="btn-trans cr-pst_img_btn" (click)="rotate(i, 90)">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="15" height="15"><path fill="#333333" d="M16 7v-4l-1.1 1.1c-1.3-2.5-3.9-4.1-6.9-4.1-4.4 0-8 3.6-8 8s3.6 8 8 8c2.4 0 4.6-1.1 6-2.8l-1.5-1.3c-1.1 1.3-2.7 2.1-4.5 2.1-3.3 0-6-2.7-6-6s2.7-6 6-6c2.4 0 4.5 1.5 5.5 3.5l-1.5 1.5h4z"></path></svg>
          </button>
          <button class="btn-trans cr-pst_img_btn" (click)="removeImg(i)">
            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="12" height="12" viewBox="0 0 729.837 729.838"><path d="M589.193,222.04c0-6.296,5.106-11.404,11.402-11.404S612,215.767,612,222.04v437.476c0,19.314-7.936,36.896-20.67,49.653c-12.733,12.734-30.339,20.669-49.653,20.669H188.162c-19.315,0-36.943-7.935-49.654-20.669c-12.734-12.734-20.669-30.313-20.669-49.653V222.04c0-6.296,5.108-11.404,11.403-11.404c6.296,0,11.404,5.131,11.404,11.404v437.476c0,13.02,5.37,24.922,13.97,33.521c8.6,8.601,20.503,13.993,33.522,13.993h353.517c13.019,0,24.896-5.394,33.498-13.993c8.624-8.624,13.992-20.503,13.992-33.498V222.04H589.193z"/><path d="M279.866,630.056c0,6.296-5.108,11.403-11.404,11.403s-11.404-5.107-11.404-11.403v-405.07c0-6.296,5.108-11.404,11.404-11.404s11.404,5.108,11.404,11.404V630.056z"/><path d="M376.323,630.056c0,6.296-5.107,11.403-11.403,11.403s-11.404-5.107-11.404-11.403v-405.07c0-6.296,5.108-11.404,11.404-11.404s11.403,5.108,11.403,11.404V630.056z"/><path d="M472.803,630.056c0,6.296-5.106,11.403-11.402,11.403c-6.297,0-11.404-5.107-11.404-11.403v-405.07c0-6.296,5.107-11.404,11.404-11.404c6.296,0,11.402,5.108,11.402,11.404V630.056L472.803,630.056z"/><path d="M273.214,70.323c0,6.296-5.108,11.404-11.404,11.404c-6.295,0-11.403-5.108-11.403-11.404c0-19.363,7.911-36.943,20.646-49.677C283.787,7.911,301.368,0,320.73,0h88.379c19.339,0,36.92,7.935,49.652,20.669c12.734,12.734,20.67,30.362,20.67,49.654c0,6.296-5.107,11.404-11.403,11.404s-11.403-5.108-11.403-11.404c0-13.019-5.369-24.922-13.97-33.522c-8.602-8.601-20.503-13.994-33.522-13.994h-88.378c-13.043,0-24.922,5.369-33.546,13.97C278.583,45.401,273.214,57.28,273.214,70.323z"/><path d="M99.782,103.108h530.273c11.189,0,21.405,4.585,28.818,11.998l0.047,0.048c7.413,7.412,11.998,17.628,11.998,28.818v29.46c0,6.295-5.108,11.403-11.404,11.403h-0.309H70.323c-6.296,0-11.404-5.108-11.404-11.403v-0.285v-29.175c0-11.166,4.585-21.406,11.998-28.818l0.048-0.048C78.377,107.694,88.616,103.108,99.782,103.108L99.782,103.108z M630.056,125.916H99.782c-4.965,0-9.503,2.02-12.734,5.274L87,131.238c-3.255,3.23-5.274,7.745-5.274,12.734v18.056h566.361v-18.056c0-4.965-2.02-9.503-5.273-12.734l-0.049-0.048C639.536,127.936,635.021,125.916,630.056,125.916z"/></svg>
          </button>
        </div>
      </div>
    </div>

    <div class="cr-pst_control">
      <mz-collapsible class="cr-pst_sl"
                      [mode]="'accordion'"
                      [popout]="false"
                      #place>
        <mz-collapsible-item [active]="false">
          <mz-collapsible-item-header>
            <div class="cr-pst_sl_svg">
              <svg xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" x="0px" y="0px" viewBox="0 0 512 512" fill="#00a3ff"><path d="M367.57,256.909c-9.839-4.677-19.878-8.706-30.093-12.081C370.56,219.996,392,180.455,392,136C392,61.01,330.991,0,256,0c-74.991,0-136,61.01-136,136c0,44.504,21.488,84.084,54.633,108.911c-30.368,9.998-58.863,25.555-83.803,46.069c-45.732,37.617-77.529,90.086-89.532,147.743c-3.762,18.066,0.745,36.622,12.363,50.908C25.222,503.847,42.365,512,60.693,512H307c11.046,0,20-8.954,20-20c0-11.046-8.954-20-20-20H60.693c-8.538,0-13.689-4.766-15.999-7.606c-3.989-4.905-5.533-11.29-4.236-17.519c20.755-99.695,108.691-172.521,210.24-174.977c1.759,0.068,3.526,0.102,5.302,0.102c1.793,0,3.578-0.035,5.354-0.104c31.12,0.73,61.05,7.832,89.044,21.14c9.977,4.74,21.907,0.499,26.649-9.478C381.789,273.582,377.547,261.651,367.57,256.909z M260.878,231.877c-1.623-0.029-3.249-0.044-4.878-0.044c-1.614,0-3.228,0.016-4.84,0.046C200.465,229.35,160,187.312,160,136c0-52.935,43.065-96,96-96s96,43.065,96,96C352,187.299,311.555,229.329,260.878,231.877z"/><path d="M492,397h-55v-55c0-11.046-8.954-20-20-20c-11.046,0-20,8.954-20,20v55h-55c-11.046,0-20,8.954-20,20c0,11.046,8.954,20,20,20h55v55c0,11.046,8.954,20,20,20c11.046,0,20-8.954,20-20v-55h55c11.046,0,20-8.954,20-20C512,405.954,503.046,397,492,397z"/></svg>
            </div>
            <span class="cr-pst_sl_tt">{{friendActive || 'Позначити друзів'}}</span>
          </mz-collapsible-item-header>
          <mz-collapsible-item-body >
            <app-search class="search" (onFind)="takeFriend($event); place.close(0);"
                        [array]="friends"
                        [type] = "'post'"
            ></app-search>
          </mz-collapsible-item-body>
        </mz-collapsible-item>

        <div  class="cr-pst_sl_i">
          <div class="cr-pst_sl_svg">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16px" height="16px" x="0px" y="0px"  fill="#00a3ff"><path d="M256,0C156.748,0,76,80.748,76,180c0,33.534,9.289,66.26,26.869,94.652l142.885,230.257 c2.737,4.411,7.559,7.091,12.745,7.091c0.04,0,0.079,0,0.119,0c5.231-0.041,10.063-2.804,12.75-7.292L410.611,272.22 C427.221,244.428,436,212.539,436,180C436,80.748,355.252,0,256,0z M384.866,256.818L258.272,468.186l-129.905-209.34 C113.734,235.214,105.8,207.95,105.8,180c0-82.71,67.49-150.2,150.2-150.2S406.1,97.29,406.1,180 C406.1,207.121,398.689,233.688,384.866,256.818z" /><path d="M256,90c-49.626,0-90,40.374-90,90c0,49.309,39.717,90,90,90c50.903,0,90-41.233,90-90C346,130.374,305.626,90,256,90z M256,240.2c-33.257,0-60.2-27.033-60.2-60.2c0-33.084,27.116-60.2,60.2-60.2s60.1,27.116,60.1,60.2 C316.1,212.683,289.784,240.2,256,240.2z"/></svg>
          </div>
          <span class="cr-pst_sl_tt">{{placeActive || 'Відмітитись'}}</span>
        </div>

        <app-upload-post class="cr-pst_sl_i" [model]="'post'" [field]="'img'" [push]="editImg" [btnName]="btn" (editImg)="newEditImg($event)" (getImg)="postObg.img.push($event)"></app-upload-post>

        <mz-collapsible-item [active]="false">
          <mz-collapsible-item-header>
            <div class="cr-pst_sl_svg">
              <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="16" height="16" viewBox="0 0 106.059 106.059" fill="#00a3ff"><path d="M90.544,90.542c20.687-20.685,20.685-54.342,0.002-75.024C69.858-5.172,36.199-5.172,15.515,15.513C-5.173,36.198-5.171,69.858,15.517,90.547C36.199,111.23,69.858,111.23,90.544,90.542z M21.302,21.3C38.796,3.807,67.261,3.805,84.759,21.302c17.494,17.494,17.492,45.962-0.002,63.455c-17.494,17.494-45.96,17.496-63.455,0.002C3.804,67.263,3.806,38.794,21.302,21.3z M58.857,41.671c0-4.798,3.903-8.701,8.703-8.701c4.797,0,8.7,3.902,8.7,8.701c0,1.381-1.119,2.5-2.5,2.5s-2.5-1.119-2.5-2.5c0-2.041-1.66-3.701-3.7-3.701c-2.042,0-3.703,1.66-3.703,3.701c0,1.381-1.119,2.5-2.5,2.5C59.976,44.171,58.857,43.051,58.857,41.671z M31.134,41.644c0-4.797,3.904-8.701,8.703-8.701c4.797,0,8.701,3.903,8.701,8.701c0,1.381-1.119,2.5-2.5,2.5c-1.381,0-2.5-1.119-2.5-2.5c0-2.041-1.66-3.701-3.701-3.701c-2.042,0-3.703,1.66-3.703,3.701c0,1.381-1.119,2.5-2.5,2.5S31.134,43.024,31.134,41.644z M30.025,63.994c-0.636-1.529,0.089-3.285,1.62-3.921c0.376-0.155,0.766-0.229,1.15-0.229c1.176,0,2.292,0.695,2.771,1.85c2.777,6.686,9.655,11.004,17.523,11.004c7.69,0,14.528-4.321,17.42-11.011c0.658-1.521,2.424-2.222,3.944-1.563s2.22,2.424,1.562,3.944c-3.843,8.887-12.843,14.629-22.927,14.629C42.788,78.697,33.735,72.927,30.025,63.994z"/></svg>
            </div>
            <span class="cr-pst_sl_tt">{{active || 'Враження'}}</span>
          </mz-collapsible-item-header>
          <mz-collapsible-item-body>
            <ul>
              <li *ngFor="let item of impressions"
                  (click)="take(item); place.close(2);">
                {{item.name}}
              </li>
            </ul>
          </mz-collapsible-item-body>
        </mz-collapsible-item>
      </mz-collapsible>
      <div class="cr-pst_btn">
        <button class="button btn-cr-pst" (click)="savePost();place.close(0);place.close(1);place.close(2);" [appCreatePost]="createP">опублікувати</button>
      </div>
      <!--<app-form class="cr-pst_btn"-->
                <!--(click)="place.close(0);place.close(1);place.close(2);"-->
                <!--[text]="'опублікувати'"-->
                <!--[class]="'button btn-cr-pst'"-->
                <!--[option]="postObg"-->
                <!--[url]="'/api/post'"-->
                <!--[valid]="[-->
                <!--{name:'des', elem:des, input:desIn}]"-->
                <!--(onRes)="addPost($event)"></app-form>-->
    </div>
  </form>
  <div class="cr_close" (click)="place.close(0);place.close(1);place.close(2);" [appCreatePost]="createP">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" x="0px" y="0px" viewBox="0 0 47.971 47.971" fill="#818181"><path d="M28.228,23.986L47.092,5.122c1.172-1.171,1.172-3.071,0-4.242c-1.172-1.172-3.07-1.172-4.242,0L23.986,19.744L5.121,0.88c-1.172-1.172-3.07-1.172-4.242,0c-1.172,1.171-1.172,3.071,0,4.242l18.865,18.864L0.879,42.85c-1.172,1.171-1.172,3.071,0,4.242C1.465,47.677,2.233,47.97,3,47.97s1.535-0.293,2.121-0.879l18.865-18.864L42.85,47.091c0.586,0.586,1.354,0.879,2.121,0.879s1.535-0.293,2.121-0.879c1.172-1.171,1.172-3.071,0-4.242L28.228,23.986z"/></svg>
  </div>
  <div class="cr-open"></div>
  <div class="fon" (click)="place.close(0);place.close(1);place.close(2);" [appCreatePost]="createP"></div>
</article>
