<article #createP class="cr-cont" isMyProfile  [appCreatePost]="false">
  <div class="cr_close" (click)="place.close(0);place.close(1);place.close(2);" [appCreatePost]="createP">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" x="0px" y="0px" viewBox="0 0 47.971 47.971" fill="#818181"><g><path d="M28.228,23.986L47.092,5.122c1.172-1.171,1.172-3.071,0-4.242c-1.172-1.172-3.07-1.172-4.242,0L23.986,19.744L5.121,0.88c-1.172-1.172-3.07-1.172-4.242,0c-1.172,1.171-1.172,3.071,0,4.242l18.865,18.864L0.879,42.85c-1.172,1.171-1.172,3.071,0,4.242C1.465,47.677,2.233,47.97,3,47.97s1.535-0.293,2.121-0.879l18.865-18.864L42.85,47.091c0.586,0.586,1.354,0.879,2.121,0.879s1.535-0.293,2.121-0.879c1.172-1.171,1.172-3.071,0-4.242L28.228,23.986z"/></g></svg>
  </div>

  <form class="cont cr-pst" isMyProfile>

    <div class="img60 pre-bg">
      <ng-container *ngIf="avatar">
        <ng-container *ngIf="avatar._id">
          <app-img [id]="avatar._id"></app-img>
        </ng-container>
      </ng-container>

      <!--<app-avatar class="inherit" [customClass]="'inherit'"></app-avatar>-->
    </div>

    <div class="cr-pst_us">
      <strong class="name">{{firstName}}</strong>
      <span *ngIf="active"> почувається {{active}}</span>
      <span *ngIf="postObg.img.length > 0 && !active"> додав фото</span>
      <span *ngIf="postObg.withFriend[0]"> разом з
        <span *ngFor="let friend of postObg.withFriend; let i = index" class="us_chip" (click)="delet(i)">
          {{friend.firstName}}
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" x="0px" y="0px" viewBox="0 0 47.971 47.971" fill="#818181"><g><path d="M28.228,23.986L47.092,5.122c1.172-1.171,1.172-3.071,0-4.242c-1.172-1.172-3.07-1.172-4.242,0L23.986,19.744L5.121,0.88c-1.172-1.172-3.07-1.172-4.242,0c-1.172,1.171-1.172,3.071,0,4.242l18.865,18.864L0.879,42.85c-1.172,1.171-1.172,3.071,0,4.242C1.465,47.677,2.233,47.97,3,47.97s1.535-0.293,2.121-0.879l18.865-18.864L42.85,47.091c0.586,0.586,1.354,0.879,2.121,0.879s1.535-0.293,2.121-0.879c1.172-1.171,1.172-3.071,0-4.242L28.228,23.986z"/></g></svg>
        </span>
      </span>
      <span *ngIf="placeActive"> у
        <span class="us_chip">
          {{placeActive}}
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" x="0px" y="0px" viewBox="0 0 47.971 47.971" fill="#818181"><g><path d="M28.228,23.986L47.092,5.122c1.172-1.171,1.172-3.071,0-4.242c-1.172-1.172-3.07-1.172-4.242,0L23.986,19.744L5.121,0.88c-1.172-1.172-3.07-1.172-4.242,0c-1.172,1.171-1.172,3.071,0,4.242l18.865,18.864L0.879,42.85c-1.172,1.171-1.172,3.071,0,4.242C1.465,47.677,2.233,47.97,3,47.97s1.535-0.293,2.121-0.879l18.865-18.864L42.85,47.091c0.586,0.586,1.354,0.879,2.121,0.879s1.535-0.293,2.121-0.879c1.172-1.171,1.172-3.071,0-4.242L28.228,23.986z"/></g></svg>
        </span>
      </span>
    </div>

    <div class="cr-pst_cm">
      <div #txtFnt class="cr-pst_fnt">{{postObg.des}}</div>
      <textarea id="crPst-area"
                #desIn
                placeholder="Поділіться своїми враженнями..."
                (resize)="desIn.style.height = txtFnt.offsetHeight + 'px'"
                [(ngModel)]="postObg.des" name="des"
                [style.height.px]="txtFnt.offsetHeight"></textarea>
      <label class="cr-pst_lb" [class.true]="postObg.des" for="crPst-area" #des>{{postObg.des || 'Поділіться своїми враженнями'}}</label>
    </div>

    <div class="cr-pst_img" *ngIf="postObg.img.length > 0">
      <div class="cr-pst_img_i" *ngFor="let img of postObg.img">
        <app-img [id]="img.crop"></app-img>
          <!--<img class="img" [src]="img.larg">-->
          <!--<span class="">rotate</span>-->
          <!--<span>del</span>-->
      </div>
    </div>

    <div class="cr-pst_control">
      <mz-collapsible class="cr-pst_sl"
                      [mode]="'accordion'"
                      [popout]="false"
                      #place>
        <mz-collapsible-item [active]="false">
          <mz-collapsible-item-header>
            <div class="cr-pst_sl_svg">
              <svg xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" x="0px" y="0px" viewBox="0 0 512 512" fill="#61148f"><g><g><path d="M367.57,256.909c-9.839-4.677-19.878-8.706-30.093-12.081C370.56,219.996,392,180.455,392,136C392,61.01,330.991,0,256,0c-74.991,0-136,61.01-136,136c0,44.504,21.488,84.084,54.633,108.911c-30.368,9.998-58.863,25.555-83.803,46.069c-45.732,37.617-77.529,90.086-89.532,147.743c-3.762,18.066,0.745,36.622,12.363,50.908C25.222,503.847,42.365,512,60.693,512H307c11.046,0,20-8.954,20-20c0-11.046-8.954-20-20-20H60.693c-8.538,0-13.689-4.766-15.999-7.606c-3.989-4.905-5.533-11.29-4.236-17.519c20.755-99.695,108.691-172.521,210.24-174.977c1.759,0.068,3.526,0.102,5.302,0.102c1.793,0,3.578-0.035,5.354-0.104c31.12,0.73,61.05,7.832,89.044,21.14c9.977,4.74,21.907,0.499,26.649-9.478C381.789,273.582,377.547,261.651,367.57,256.909z M260.878,231.877c-1.623-0.029-3.249-0.044-4.878-0.044c-1.614,0-3.228,0.016-4.84,0.046C200.465,229.35,160,187.312,160,136c0-52.935,43.065-96,96-96s96,43.065,96,96C352,187.299,311.555,229.329,260.878,231.877z"/></g></g><g><g><path d="M492,397h-55v-55c0-11.046-8.954-20-20-20c-11.046,0-20,8.954-20,20v55h-55c-11.046,0-20,8.954-20,20c0,11.046,8.954,20,20,20h55v55c0,11.046,8.954,20,20,20c11.046,0,20-8.954,20-20v-55h55c11.046,0,20-8.954,20-20C512,405.954,503.046,397,492,397z"/></g></g></svg>
            </div>
            <span class="cr-pst_sl_tt">{{friendActive || 'Позначити друзів'}}</span>
          </mz-collapsible-item-header>
          <mz-collapsible-item-body >
            <app-search class="search" (onFind)="takeFriend($event); place.close(0);"
                        [array]="friends"
                        [type] = "'user'"
                        [searchDropD]="false"
            ></app-search>
          </mz-collapsible-item-body>
        </mz-collapsible-item>

        <mz-collapsible-item [active]="false">
          <mz-collapsible-item-header>
            <div class="cr-pst_sl_svg">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16px" height="16px" x="0px" y="0px"  fill="#61148f"><g><g><path d="M256,0C156.748,0,76,80.748,76,180c0,33.534,9.289,66.26,26.869,94.652l142.885,230.257 c2.737,4.411,7.559,7.091,12.745,7.091c0.04,0,0.079,0,0.119,0c5.231-0.041,10.063-2.804,12.75-7.292L410.611,272.22 C427.221,244.428,436,212.539,436,180C436,80.748,355.252,0,256,0z M384.866,256.818L258.272,468.186l-129.905-209.34 C113.734,235.214,105.8,207.95,105.8,180c0-82.71,67.49-150.2,150.2-150.2S406.1,97.29,406.1,180 C406.1,207.121,398.689,233.688,384.866,256.818z" /></g></g><g><g><path d="M256,90c-49.626,0-90,40.374-90,90c0,49.309,39.717,90,90,90c50.903,0,90-41.233,90-90C346,130.374,305.626,90,256,90z M256,240.2c-33.257,0-60.2-27.033-60.2-60.2c0-33.084,27.116-60.2,60.2-60.2s60.1,27.116,60.1,60.2 C316.1,212.683,289.784,240.2,256,240.2z"/></g></g></svg>
            </div>
            <span class="cr-pst_sl_tt">{{placeActive || 'Відмітитись'}}</span>
          </mz-collapsible-item-header>
          <mz-collapsible-item-body >
            <app-search class="search" (onFind)="takePlace($event); place.close(1);"
                        [array]="places"
                        [type] = "'est'"
                        [searchDropD]="false"
            ></app-search>
          </mz-collapsible-item-body>
        </mz-collapsible-item>

        <app-upload class="cr-pst_sl_i" [model]="'post'" [field]="'img'" [multiple]="true" [btnName]="btn" (getImg)="postObg.img.push($event)"></app-upload>

        <mz-collapsible-item [active]="false">
          <mz-collapsible-item-header>
            <div class="cr-pst_sl_svg">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" x="0px" y="0px" viewBox="0 0 512 512" fill="#61148f"><g><g><path d="M256,0C156.748,0,76,80.748,76,180c0,33.534,9.289,66.26,26.869,94.652l142.885,230.257 c2.737,4.411,7.559,7.091,12.745,7.091c0.04,0,0.079,0,0.119,0c5.231-0.041,10.063-2.804,12.75-7.292L410.611,272.22 C427.221,244.428,436,212.539,436,180C436,80.748,355.252,0,256,0z M384.866,256.818L258.272,468.186l-129.905-209.34 C113.734,235.214,105.8,207.95,105.8,180c0-82.71,67.49-150.2,150.2-150.2S406.1,97.29,406.1,180 C406.1,207.121,398.689,233.688,384.866,256.818z" /></g></g><g><g><path d="M256,90c-49.626,0-90,40.374-90,90c0,49.309,39.717,90,90,90c50.903,0,90-41.233,90-90C346,130.374,305.626,90,256,90z M256,240.2c-33.257,0-60.2-27.033-60.2-60.2c0-33.084,27.116-60.2,60.2-60.2s60.1,27.116,60.1,60.2 C316.1,212.683,289.784,240.2,256,240.2z"/></g></g></svg>
            </div>
            <span class="cr-pst_sl_tt">{{active || 'Враження'}}</span>
          </mz-collapsible-item-header>
          <mz-collapsible-item-body>
            <ul>
              <li *ngFor="let item of impressions"
                  (click)="take(item); place.close(2);">
                {{item.name}}
              </li>
            </ul>
          </mz-collapsible-item-body>
        </mz-collapsible-item>
      </mz-collapsible>

      <app-form class="cr-pst_btn"
                (click)="place.close(0);place.close(1);place.close(2);"
                [text]="'опублікувати'"
                [class]="'button btn-cr-pst'"
                [option]="postObg"
                [url]="'/api/post'"
                [valid]="[
                {name:'des', elem:des, input:desIn}]"
                (onRes)="addPost($event)"
                [appCreatePost]="createP"></app-form>
    </div>
  </form>
  <div class="fon" (click)="place.close(0);place.close(1);place.close(2);" [appCreatePost]="createP"></div>
</article>
