<button (click)="findMe(); hidden()" class="geo">
  <span class="svg20">
      <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 512 512" width="20" height="20"><path d="M256,0C156.748,0,76,80.748,76,180c0,33.534,9.289,66.26,26.869,94.652l142.885,230.257 c2.737,4.411,7.559,7.091,12.745,7.091c0.04,0,0.079,0,0.119,0c5.231-0.041,10.063-2.804,12.75-7.292L410.611,272.22 C427.221,244.428,436,212.539,436,180C436,80.748,355.252,0,256,0z M384.866,256.818L258.272,468.186l-129.905-209.34 C113.734,235.214,105.8,207.95,105.8,180c0-82.71,67.49-150.2,150.2-150.2S406.1,97.29,406.1,180 C406.1,207.121,398.689,233.688,384.866,256.818z" /><path d="M256,90c-49.626,0-90,40.374-90,90c0,49.309,39.717,90,90,90c50.903,0,90-41.233,90-90C346,130.374,305.626,90,256,90z M256,240.2c-33.257,0-60.2-27.033-60.2-60.2c0-33.084,27.116-60.2,60.2-60.2s60.1,27.116,60.1,60.2 C316.1,212.683,289.784,240.2,256,240.2z"/></svg>
  </span>
  Найближчі заклади
</button>

<ng-container *ngIf="distans.length>0">
  <div class="cont md md-full2 p-l-cont" [ngClass]="{'active':isShow}">
    <div class="p-l">
      <button type="button" class="btn-trans btn-close o5" (click)="close()">
        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 47.971 47.971" width="20" height="20"><path d="M28.228,23.986L47.092,5.122c1.172-1.171,1.172-3.071,0-4.242c-1.172-1.172-3.07-1.172-4.242,0L23.986,19.744L5.121,0.88c-1.172-1.172-3.07-1.172-4.242,0c-1.172,1.171-1.172,3.071,0,4.242l18.865,18.864L0.879,42.85c-1.172,1.171-1.172,3.071,0,4.242C1.465,47.677,2.233,47.97,3,47.97s1.535-0.293,2.121-0.879l18.865-18.864L42.85,47.091c0.586,0.586,1.354,0.879,2.121,0.879s1.535-0.293,2.121-0.879c1.172-1.171,1.172-3.071,0-4.242L28.228,23.986z"></path></svg>
      </button>
      <div class="p-l_map map pre-bg" [class.mobTab]="!tab" *ngIf="(onLoad && meXY.length>0)">
        <p class="p-l_h-t h_t16">На карті</p>
        <div class="map_cn">
          <div class="p-l_h2">
            <div class="p-l_h2_cn">
              <button type="button" class="btn-trans btn-p-l_l" (click)="tab=!tab">
                <span class="c_t">Місця</span>
                <span class="btn-p-l_l_svg" >
                  <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 512 512" width="15" height="15px"><path d="M256,0C156.748,0,76,80.748,76,180c0,33.534,9.289,66.26,26.869,94.652l142.885,230.257c2.737,4.411,7.559,7.091,12.745,7.091c0.04,0,0.079,0,0.119,0c5.231-0.041,10.063-2.804,12.75-7.292L410.611,272.22C427.221,244.428,436,212.539,436,180C436,80.748,355.252,0,256,0z M384.866,256.818L258.272,468.186l-129.905-209.34C113.734,235.214,105.8,207.95,105.8,180c0-82.71,67.49-150.2,150.2-150.2S406.1,97.29,406.1,180C406.1,207.121,398.689,233.688,384.866,256.818z"></path><path d="M256,90c-49.626,0-90,40.374-90,90c0,49.309,39.717,90,90,90c50.903,0,90-41.233,90-90C346,130.374,305.626,90,256,90z M256,240.2c-33.257,0-60.2-27.033-60.2-60.2c0-33.084,27.116-60.2,60.2-60.2s60.1,27.116,60.1,60.2C316.1,212.683,289.784,240.2,256,240.2z"></path></svg>
                </span>
              </button>
              <div class="btn-trans btn-p-l_l active">
                <span class="c_t">На карті</span>
                <span class="btn-p-l_l_svg" >
                  <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 512 512" width="15" height="15px"><path d="M256,0C156.748,0,76,80.748,76,180c0,33.534,9.289,66.26,26.869,94.652l142.885,230.257c2.737,4.411,7.559,7.091,12.745,7.091c0.04,0,0.079,0,0.119,0c5.231-0.041,10.063-2.804,12.75-7.292L410.611,272.22C427.221,244.428,436,212.539,436,180C436,80.748,355.252,0,256,0z M384.866,256.818L258.272,468.186l-129.905-209.34C113.734,235.214,105.8,207.95,105.8,180c0-82.71,67.49-150.2,150.2-150.2S406.1,97.29,406.1,180C406.1,207.121,398.689,233.688,384.866,256.818z"></path><path d="M256,90c-49.626,0-90,40.374-90,90c0,49.309,39.717,90,90,90c50.903,0,90-41.233,90-90C346,130.374,305.626,90,256,90z M256,240.2c-33.257,0-60.2-27.033-60.2-60.2c0-33.084,27.116-60.2,60.2-60.2s60.1,27.116,60.1,60.2C316.1,212.683,289.784,240.2,256,240.2z"></path></svg>
                </span>
              </div>
            </div>
          </div>
          <app-map [me]="meXY" [meAvatar]="avatar" [XY]="cordinates"></app-map>
        </div>

        <!--<app-map [me]="meXY"></app-map>-->
      </div>
      <div class="p-l_c" [class.mobTab]="tab">
        <p class="p-l_h-t h_t16">Найближчі місця <span class="c_t14 o5">({{countEst}})</span> <ng-container *ngIf="isDefPos">вiд ЦУМ-а</ng-container> </p>

        <article class="cont_c p-l_i p-l_i2">
          <div class="p-l_h2">
            <div class="p-l_h2_cn">
              <div class="btn-trans btn-p-l_l active">
                <span class="c_t">Місця</span>
                <span class="btn-p-l_l_svg">
                  <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 512 512" width="15" height="15px"><path d="M256,0C156.748,0,76,80.748,76,180c0,33.534,9.289,66.26,26.869,94.652l142.885,230.257c2.737,4.411,7.559,7.091,12.745,7.091c0.04,0,0.079,0,0.119,0c5.231-0.041,10.063-2.804,12.75-7.292L410.611,272.22C427.221,244.428,436,212.539,436,180C436,80.748,355.252,0,256,0z M384.866,256.818L258.272,468.186l-129.905-209.34C113.734,235.214,105.8,207.95,105.8,180c0-82.71,67.49-150.2,150.2-150.2S406.1,97.29,406.1,180C406.1,207.121,398.689,233.688,384.866,256.818z"></path><path d="M256,90c-49.626,0-90,40.374-90,90c0,49.309,39.717,90,90,90c50.903,0,90-41.233,90-90C346,130.374,305.626,90,256,90z M256,240.2c-33.257,0-60.2-27.033-60.2-60.2c0-33.084,27.116-60.2,60.2-60.2s60.1,27.116,60.1,60.2C316.1,212.683,289.784,240.2,256,240.2z"></path></svg>
                </span>
              </div>

              <button type="button" class="btn-trans btn-p-l_l" (click)="tab=!tab">
                <span class="c_t">На карті</span>
                <span class="btn-p-l_l_svg" >
                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 512 512" width="15" height="15px"><path d="M256,0C156.748,0,76,80.748,76,180c0,33.534,9.289,66.26,26.869,94.652l142.885,230.257c2.737,4.411,7.559,7.091,12.745,7.091c0.04,0,0.079,0,0.119,0c5.231-0.041,10.063-2.804,12.75-7.292L410.611,272.22C427.221,244.428,436,212.539,436,180C436,80.748,355.252,0,256,0z M384.866,256.818L258.272,468.186l-129.905-209.34C113.734,235.214,105.8,207.95,105.8,180c0-82.71,67.49-150.2,150.2-150.2S406.1,97.29,406.1,180C406.1,207.121,398.689,233.688,384.866,256.818z"></path><path d="M256,90c-49.626,0-90,40.374-90,90c0,49.309,39.717,90,90,90c50.903,0,90-41.233,90-90C346,130.374,305.626,90,256,90z M256,240.2c-33.257,0-60.2-27.033-60.2-60.2c0-33.084,27.116-60.2,60.2-60.2s60.1,27.116,60.1,60.2C316.1,212.683,289.784,240.2,256,240.2z"></path></svg>
              </span>
              </button>
            </div>
          </div>
          <div class="p-l_ic2" *ngIf="onLoad">
            <ng-container *ngFor="let est of distans">
              <ng-container *ngIf="est.ownerEst">
              <ng-container *ngIf="est.ownerEst.verify">
                <a href="//{{est.ownerEst.subdomain}}.{{host}}"  *ngIf="est.ownerEst.subdomain">
                  <div class="l_i cart" *ngIf="est.ownerEst">
                    <div class="l_i_h">
                      <h1 class="l_i_h-t c_t14">{{est.name}}</h1>
                      <div class="l_i_btn-cont">
                        <button type="button" class="btn-trans btn-l_i like btnActive" [class.active]="checkIconActive(est.ownerEst.thebest)">
                        <span class="l_i_svg">
                          <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 15 13" fill="none"><path d="M13.0241 1.12805C12.2895 0.400412 11.313 0 10.2741 0C9.23506 0 8.25842 0.400412 7.52358 1.12805L7.16159 1.48667L6.79961 1.12805C6.06499 0.400412 5.08813 0 4.0493 0C3.01052 0 2.03358 0.400412 1.29904 1.12805C-0.217519 2.63034 -0.217519 5.07464 1.29904 6.57635L6.73329 11.959C6.82214 12.0473 6.93276 12.1014 7.04832 12.1222C7.08708 12.1298 7.12605 12.1333 7.1651 12.1333C7.31883 12.1333 7.47282 12.0753 7.5899 11.959L13.0242 6.57635C14.5408 5.07464 14.5408 2.63034 13.0241 1.12805ZM12.1745 5.73487L7.16163 10.7002L2.14863 5.73487C1.10057 4.69692 1.10057 3.0081 2.14863 1.9696C2.65629 1.46683 3.3315 1.19029 4.0493 1.19029C4.76718 1.19029 5.44221 1.46683 5.94969 1.9696L6.7368 2.74949C6.96242 2.97264 7.36106 2.97264 7.58665 2.74949L8.37347 1.9696C8.88098 1.46683 9.55604 1.19029 10.2741 1.19029C10.992 1.19029 11.667 1.46683 12.1745 1.9696C13.2227 3.0081 13.2227 4.69688 12.1745 5.73487Z" fill="#D75A4A"/><path d="M12.1745 5.73488L7.1616 10.7002L2.14859 5.73488C1.10053 4.69693 1.10053 3.00812 2.14859 1.96961C2.65625 1.46685 3.33146 1.19031 4.04927 1.19031C4.76715 1.19031 5.44217 1.46685 5.94965 1.96961L6.73676 2.74951C6.96239 2.97266 7.36102 2.97266 7.58661 2.74951L8.37343 1.96961C8.88095 1.46685 9.55601 1.19031 10.2741 1.19031C10.992 1.19031 11.667 1.46685 12.1745 1.96961C13.2227 3.00812 13.2227 4.69689 12.1745 5.73488Z" fill="transparent"/></svg>
                        </span>
                          <span class="l_i_val o5" *ngIf="est.ownerEst.thebest">{{est.ownerEst.thebest.length}}</span>
                        </button>
                        <button type="button" class="btn-trans btn-l_i btnActive" [class.active]="checkIconActive(est.ownerEst.favorite)">
                        <span class="l_i_svg">
                          <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0 0 456.814 456.814" fill="none"><path d="M441.11,252.677c10.468-11.99,15.704-26.169,15.704-42.54c0-14.846-5.432-27.692-16.259-38.547c-10.849-10.854-23.695-16.278-38.541-16.278h-79.082c0.76-2.664,1.522-4.948,2.282-6.851c0.753-1.903,1.811-3.999,3.138-6.283c1.328-2.285,2.283-3.999,2.852-5.139c3.425-6.468,6.047-11.801,7.857-15.985c1.807-4.192,3.606-9.9,5.42-17.133c1.811-7.229,2.711-14.465,2.711-21.698c0-4.566-0.055-8.281-0.145-11.134c-0.089-2.855-0.574-7.139-1.423-12.85c-0.862-5.708-2.006-10.467-3.43-14.272c-1.43-3.806-3.716-8.092-6.851-12.847c-3.142-4.764-6.947-8.613-11.424-11.565c-4.476-2.95-10.184-5.424-17.131-7.421c-6.954-1.999-14.801-2.998-23.562-2.998c-4.948,0-9.227,1.809-12.847,5.426c-3.806,3.806-7.047,8.564-9.709,14.272c-2.666,5.711-4.523,10.66-5.571,14.849c-1.047,4.187-2.238,9.994-3.565,17.415c-1.719,7.998-2.998,13.752-3.86,17.273c-0.855,3.521-2.525,8.136-4.997,13.845c-2.477,5.713-5.424,10.278-8.851,13.706c-6.28,6.28-15.891,17.701-28.837,34.259c-9.329,12.18-18.94,23.695-28.837,34.545c-9.899,10.852-17.131,16.466-21.698,16.847c-4.755,0.38-8.848,2.331-12.275,5.854c-3.427,3.521-5.14,7.662-5.14,12.419v183.01c0,4.949,1.807,9.182,5.424,12.703c3.615,3.525,7.898,5.38,12.847,5.571c6.661,0.191,21.698,4.374,45.111,12.566c14.654,4.941,26.12,8.706,34.4,11.272c8.278,2.566,19.849,5.328,34.684,8.282c14.849,2.949,28.551,4.428,41.11,4.428h4.855h21.7h10.276c25.321-0.38,44.061-7.806,56.247-22.268c11.036-13.135,15.697-30.361,13.99-51.679c7.422-7.042,12.565-15.984,15.416-26.836c3.231-11.604,3.231-22.74,0-33.397c8.754-11.611,12.847-24.649,12.272-39.115C445.395,268.286,443.971,261.055,441.11,252.677z" fill="transparent" stroke="#00a3ff" stroke-width="20" stroke-linejoin="round" /><path d="M100.5,191.864H18.276c-4.952,0-9.235,1.809-12.851,5.426C1.809,200.905,0,205.188,0,210.137v182.732c0,4.942,1.809,9.227,5.426,12.847c3.619,3.611,7.902,5.421,12.851,5.421H100.5c4.948,0,9.229-1.81,12.847-5.421c3.616-3.62,5.424-7.904,5.424-12.847V210.137c0-4.949-1.809-9.231-5.424-12.847C109.73,193.672,105.449,191.864,100.5,191.864z M67.665,369.308c-3.616,3.521-7.898,5.281-12.847,5.281c-5.14,0-9.471-1.76-12.99-5.281c-3.521-3.521-5.281-7.85-5.281-12.99c0-4.948,1.759-9.232,5.281-12.847c3.52-3.617,7.85-5.428,12.99-5.428c4.949,0,9.231,1.811,12.847,5.428c3.617,3.614,5.426,7.898,5.426,12.847C73.091,361.458,71.286,365.786,67.665,369.308z" fill="transparent" stroke="#00a3ff" stroke-width="20" stroke-linejoin="round"/></svg>
                        </span>
                          <span class="l_i_val o5" *ngIf="est.ownerEst.favorite">{{est.ownerEst.favorite.length}}</span>
                        </button>
                      </div>
                    </div>
                    <div class="l_i_bg" *ngIf="est.ownerEst">
                      <ng-container *ngIf="est.ownerEst.bg; else estBg">
                        <ng-container *ngIf="est.ownerEst.bg.picCrop; else estBg">
                          <img class="img" [src]="est.ownerEst.bg.picCrop">
                        </ng-container>
                      </ng-container>
                    </div>
                    <div class="l_i_av" *ngIf="est.ownerEst">
                      <ng-container *ngIf="est.ownerEst.av; else estAv">
                        <ng-container *ngIf="est.ownerEst.av.picCrop; else estAv">
                          <img [src]="est.ownerEst.av.picCrop">
                        </ng-container>
                      </ng-container>
                    </div>
                    <div class="l_i_h distanse" *ngIf="est.distans < 1">~ {{(est.distans*1000) | number : '3.0-0'}} м</div>
                    <div class="l_i_h distanse" *ngIf="est.distans >= 1">~ {{est.distans | number : '1.2-2'}} км</div>
                  </div>
                </a>
              </ng-container>
              </ng-container>
            </ng-container>
          </div>
          <button type="button" class="btn-trans o5 btn-ar">
            <span class="btn-ar_t c_t">Показати ще</span>
            <span class="btn-ar_svg">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 129 129" width="10" height="10"><path d="m121.3,34.6c-1.6-1.6-4.2-1.6-5.8,0l-51,51.1-51.1-51.1c-1.6-1.6-4.2-1.6-5.8,0-1.6,1.6-1.6,4.2 0,5.8l53.9,53.9c0.8,0.8 1.8,1.2 2.9,1.2 1,0 2.1-0.4 2.9-1.2l53.9-53.9c1.7-1.6 1.7-4.2 0.1-5.8z"></path></svg>
            </span>
          </button>
        </article>
      </div>
    </div>
  </div>
  <div class="md-fixed" [ngClass]="{'active':isShow}" (click)="close()"></div>
</ng-container>

<ng-container *ngIf="isShow && distans.length==0">
  <div class="loader">
    <div>
      Зачекайте будь ласка...
    </div>
  </div>
</ng-container>
<ng-template #estAv>
  <app-prev-avatar></app-prev-avatar>
</ng-template>
<ng-template #estBg>
  <app-prev-bg></app-prev-bg>
</ng-template>
