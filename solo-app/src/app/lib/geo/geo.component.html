<button (click)="findMe(); hidden()" class="geo">
  <span class="svg20">
      <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 512 512" width="20" height="20"><path d="M256,0C156.748,0,76,80.748,76,180c0,33.534,9.289,66.26,26.869,94.652l142.885,230.257 c2.737,4.411,7.559,7.091,12.745,7.091c0.04,0,0.079,0,0.119,0c5.231-0.041,10.063-2.804,12.75-7.292L410.611,272.22 C427.221,244.428,436,212.539,436,180C436,80.748,355.252,0,256,0z M384.866,256.818L258.272,468.186l-129.905-209.34 C113.734,235.214,105.8,207.95,105.8,180c0-82.71,67.49-150.2,150.2-150.2S406.1,97.29,406.1,180 C406.1,207.121,398.689,233.688,384.866,256.818z" /><path d="M256,90c-49.626,0-90,40.374-90,90c0,49.309,39.717,90,90,90c50.903,0,90-41.233,90-90C346,130.374,305.626,90,256,90z M256,240.2c-33.257,0-60.2-27.033-60.2-60.2c0-33.084,27.116-60.2,60.2-60.2s60.1,27.116,60.1,60.2 C316.1,212.683,289.784,240.2,256,240.2z"/></svg>
  </span>
  Найближчі заклади
</button>

<ng-container *ngIf="distans.length>0">
  <div class="cont md md-full2 p-l-cont" [ngClass]="{'active':isShow}">
    <div class="p-l">
      <button type="button" class="btn-trans btn-close o5" (click)="close()">
        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 47.971 47.971" width="20" height="20"><path d="M28.228,23.986L47.092,5.122c1.172-1.171,1.172-3.071,0-4.242c-1.172-1.172-3.07-1.172-4.242,0L23.986,19.744L5.121,0.88c-1.172-1.172-3.07-1.172-4.242,0c-1.172,1.171-1.172,3.071,0,4.242l18.865,18.864L0.879,42.85c-1.172,1.171-1.172,3.071,0,4.242C1.465,47.677,2.233,47.97,3,47.97s1.535-0.293,2.121-0.879l18.865-18.864L42.85,47.091c0.586,0.586,1.354,0.879,2.121,0.879s1.535-0.293,2.121-0.879c1.172-1.171,1.172-3.071,0-4.242L28.228,23.986z"></path></svg>
      </button>
      <div class="p-l_map map pre-bg" [class.mobTab]="!tab" *ngIf="(onLoad && meXY.length>0)">
        <p class="p-l_h-t h_t16">На карті</p>
        <div class="map_cn">
          <div class="p-l_h2">
            <button type="button" class="btn-trans btn-p-l_l" (click)="tab=!tab">
              <span class="c_t">Місця</span>
              <span class="btn-p-l_l_svg" >
              <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 512 512" width="15" height="15px"><path d="M256,0C156.748,0,76,80.748,76,180c0,33.534,9.289,66.26,26.869,94.652l142.885,230.257c2.737,4.411,7.559,7.091,12.745,7.091c0.04,0,0.079,0,0.119,0c5.231-0.041,10.063-2.804,12.75-7.292L410.611,272.22C427.221,244.428,436,212.539,436,180C436,80.748,355.252,0,256,0z M384.866,256.818L258.272,468.186l-129.905-209.34C113.734,235.214,105.8,207.95,105.8,180c0-82.71,67.49-150.2,150.2-150.2S406.1,97.29,406.1,180C406.1,207.121,398.689,233.688,384.866,256.818z"></path><path d="M256,90c-49.626,0-90,40.374-90,90c0,49.309,39.717,90,90,90c50.903,0,90-41.233,90-90C346,130.374,305.626,90,256,90z M256,240.2c-33.257,0-60.2-27.033-60.2-60.2c0-33.084,27.116-60.2,60.2-60.2s60.1,27.116,60.1,60.2C316.1,212.683,289.784,240.2,256,240.2z"></path></svg>
            </span>
            </button>
          </div>
          <app-map [me]="meXY" [meAvatar]="avatar" [XY]="cordinates"></app-map>
        </div>

        <!--<app-map [me]="meXY"></app-map>-->
      </div>
      <div class="p-l_c" [class.mobTab]="tab">
        <p class="p-l_h-t h_t16">Найближчі місця <ng-container *ngIf="isDefPos">вiд ЦУМ-а</ng-container></p>

        <article class="cont_c p-l_i p-l_i2">
          <div class="p-l_h2">
            <span class="c_t o5">Знайденно {{distans.length}} місця</span>

            <button type="button" class="btn-trans btn-p-l_l" (click)="tab=!tab">
              <span class="c_t">На карті</span>
                <span class="btn-p-l_l_svg" >
                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 512 512" width="15" height="15px"><path d="M256,0C156.748,0,76,80.748,76,180c0,33.534,9.289,66.26,26.869,94.652l142.885,230.257c2.737,4.411,7.559,7.091,12.745,7.091c0.04,0,0.079,0,0.119,0c5.231-0.041,10.063-2.804,12.75-7.292L410.611,272.22C427.221,244.428,436,212.539,436,180C436,80.748,355.252,0,256,0z M384.866,256.818L258.272,468.186l-129.905-209.34C113.734,235.214,105.8,207.95,105.8,180c0-82.71,67.49-150.2,150.2-150.2S406.1,97.29,406.1,180C406.1,207.121,398.689,233.688,384.866,256.818z"></path><path d="M256,90c-49.626,0-90,40.374-90,90c0,49.309,39.717,90,90,90c50.903,0,90-41.233,90-90C346,130.374,305.626,90,256,90z M256,240.2c-33.257,0-60.2-27.033-60.2-60.2c0-33.084,27.116-60.2,60.2-60.2s60.1,27.116,60.1,60.2C316.1,212.683,289.784,240.2,256,240.2z"></path></svg>
              </span>
            </button>

          </div>
          <div class="p-l_ic2" *ngIf="onLoad">
            <ng-container *ngFor="let est of distans">
              <ng-container *ngIf="est.ownerEst">
                <a href="//{{est.ownerEst.subdomain}}.{{host}}"  *ngIf="est.ownerEst.subdomain">
                  <div class="l_i cart" *ngIf="est.ownerEst">
                    <div class="l_i_h">
                      <h1 class="l_i_h-t c_t14">{{est.ownerEst.name}} {{est.name}}</h1>
                      <div class="l_i_btn-cont">
                        <button type="button" class="btn-trans btn-l_i btnActive" [class.active]="true">
                      <span class="l_i_svg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 15 13" fill="none"><path d="M13.0241 1.12805C12.2895 0.400412 11.313 0 10.2741 0C9.23506 0 8.25842 0.400412 7.52358 1.12805L7.16159 1.48667L6.79961 1.12805C6.06499 0.400412 5.08813 0 4.0493 0C3.01052 0 2.03358 0.400412 1.29904 1.12805C-0.217519 2.63034 -0.217519 5.07464 1.29904 6.57635L6.73329 11.959C6.82214 12.0473 6.93276 12.1014 7.04832 12.1222C7.08708 12.1298 7.12605 12.1333 7.1651 12.1333C7.31883 12.1333 7.47282 12.0753 7.5899 11.959L13.0242 6.57635C14.5408 5.07464 14.5408 2.63034 13.0241 1.12805ZM12.1745 5.73487L7.16163 10.7002L2.14863 5.73487C1.10057 4.69692 1.10057 3.0081 2.14863 1.9696C2.65629 1.46683 3.3315 1.19029 4.0493 1.19029C4.76718 1.19029 5.44221 1.46683 5.94969 1.9696L6.7368 2.74949C6.96242 2.97264 7.36106 2.97264 7.58665 2.74949L8.37347 1.9696C8.88098 1.46683 9.55604 1.19029 10.2741 1.19029C10.992 1.19029 11.667 1.46683 12.1745 1.9696C13.2227 3.0081 13.2227 4.69688 12.1745 5.73487Z" fill="#D75A4A"/><path d="M12.1745 5.73488L7.1616 10.7002L2.14859 5.73488C1.10053 4.69693 1.10053 3.00812 2.14859 1.96961C2.65625 1.46685 3.33146 1.19031 4.04927 1.19031C4.76715 1.19031 5.44217 1.46685 5.94965 1.96961L6.73676 2.74951C6.96239 2.97266 7.36102 2.97266 7.58661 2.74951L8.37343 1.96961C8.88095 1.46685 9.55601 1.19031 10.2741 1.19031C10.992 1.19031 11.667 1.46685 12.1745 1.96961C13.2227 3.00812 13.2227 4.69689 12.1745 5.73488Z" fill="transparent"/></svg>
                      </span>
                          <span class="l_i_val o5" *ngIf="est.ownerEst.favorite">{{est.ownerEst.favorite.length}}</span>
                        </button>
                        <button type="button" class="btn-trans btn-l_i btnActive" [class.active]="true">
                      <span class="l_i_svg">
                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 485.027 485.027" width="20" height="20" fill="#00a3ff"><path fill="transparent" d="M109.4,459.991H13c-2.1,0-3.9-1.8-3.9-3.9v-248.4c0-2.1,1.8-3.9,3.9-3.9h96.4c2.1,0,3.9,1.8,3.9,3.9v248.4C113.3,458.191,111.6,459.991,109.4,459.991z"/><path d="M284.6,20.391c-28.2-20.7-67.2-8.8-68.8-8.3c-3.8,1.2-6.3,4.7-6.3,8.6v85.8c0,29.1-13.8,53.7-41.1,73.2c-21.1,15.1-42.7,21.3-42.9,21.4c-0.2,0-0.3,0.1-0.5,0.2l-5.1,1.7c-3-4.9-8.3-8.2-14.5-8.2H16.9c-9.3,0-16.9,7.6-16.9,16.9v240.5c0,9.3,7.6,16.9,16.9,16.9h88.6c8,0,14.7-5.6,16.4-13c11.9,12.7,28.8,20.7,47.6,20.7h209.8c44.6,0,73.1-23.3,78.1-64l26.8-170.2c3.9-24.7-6.2-49.7-25.8-63.7c-11.1-8-24.2-12.2-37.9-12.2H311.4v-79.6C311.4,55.891,302.4,33.491,284.6,20.391z M104.2,450.891H18.1v-238h86.1V450.891z M420.5,184.791c9.9,0,19.3,3,27.3,8.8c14,10.1,21.3,28.2,18.4,46.2l-26.7,170.3c0,0.1,0,0.2,0,0.3c-4.9,39.8-35.4,48.2-60.2,48.2H169.5c-26,0-47.1-21.1-47.1-47.1v-190.2l8.3-2.8c2.9-0.8,25.2-7.6,47.8-23.7c32.1-22.8,49.1-53.3,49.1-88.2v-78.6c10.4-2,31.3-4,46.4,7.1c12.8,9.4,19.3,26.9,19.3,52v88.7c0,5,4.1,9.1,9.1,9.1h118.1V184.791z"/></svg>
                      </span>
                          <span class="l_i_val o5" *ngIf="est.ownerEst.thebest">{{est.ownerEst.thebest.length}}</span>
                        </button>
                      </div>
                    </div>
                    <div class="l_i_h distanse" *ngIf="est.distans < 1">{{(est.distans*1000) | number : '3.0-0'}} метрів</div>
                    <div class="l_i_h distanse" *ngIf="est.distans >= 1">{{est.distans | number : '1.2-2'}} кілометрів</div>
                    <div class="l_i_bg pre-bg">
                      <div class="inherit" *ngIf="est.ownerEst">
                        <ng-container *ngIf="est.ownerEst.bg; else estBg">
                          <ng-container *ngIf="est.ownerEst.bg.picCrop; else estBg">
                            <img [src]="est.ownerEst.bg.picCrop">
                          </ng-container>
                        </ng-container>
                      </div>
                    </div>
                    <div class="l_i_av pre-bg">
                      <div class="inherit" *ngIf="est.ownerEst">
                        <ng-container *ngIf="est.ownerEst.av; else estAv">
                          <ng-container *ngIf="est.ownerEst.av.picCrop; else estAv">
                            <img [src]="est.ownerEst.av.picCrop">
                          </ng-container>
                        </ng-container>
                      </div>
                    </div>
                  </div>
                </a>
              </ng-container>
            </ng-container>
          </div>
          <button type="button" class="btn-trans o5 btn-ar">
            <span class="btn-ar_t c_t">Показати ще</span>
            <span class="btn-ar_svg">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 129 129" width="10" height="10"><path d="m121.3,34.6c-1.6-1.6-4.2-1.6-5.8,0l-51,51.1-51.1-51.1c-1.6-1.6-4.2-1.6-5.8,0-1.6,1.6-1.6,4.2 0,5.8l53.9,53.9c0.8,0.8 1.8,1.2 2.9,1.2 1,0 2.1-0.4 2.9-1.2l53.9-53.9c1.7-1.6 1.7-4.2 0.1-5.8z"></path></svg>
            </span>
          </button>
        </article>
      </div>
    </div>
  </div>
  <div class="md-fixed" [ngClass]="{'active':isShow}" (click)="close()"></div>
</ng-container>

<ng-container *ngIf="isShow && distans.length==0">
  <div class="loader">
    <div>
      Зачекайте будь-ласка...
    </div>
  </div>
</ng-container>
<ng-template #estAv>
  <app-prev-avatar></app-prev-avatar>
</ng-template>
<ng-template #estBg>
  <app-prev-bg></app-prev-bg>
</ng-template>
