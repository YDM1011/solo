<ng-container *ngIf="loaded">
<ng-container *ngIf="pic && !size; else sizeTemp">
  <ng-container *ngIf="pic.picCrop">
    <ng-container *ngIf="pic.model=='establishment' && pic.field=='av'">
      <ng-container *ngTemplateOutlet="establishmentAv"></ng-container>
    </ng-container>

    <ng-container *ngIf="pic.model=='establishment' && pic.field=='bg'">
      <ng-container *ngTemplateOutlet="establishmentBg"></ng-container>
    </ng-container>

    <ng-container *ngIf="pic.model=='user' && pic.field=='photo'">
      <ng-container *ngTemplateOutlet="userPhoto"></ng-container>
    </ng-container>

    <ng-container *ngIf="pic.model=='user' && pic.field=='bg'">
      <ng-container *ngTemplateOutlet="userBg"></ng-container>
    </ng-container>

    <ng-container *ngIf="pic.model=='post' && pic.field=='img'">
      <ng-container *ngTemplateOutlet="postImg"></ng-container>
    </ng-container>

    <ng-container *ngIf="pic.model=='dish' && pic.field=='pic'">
      <ng-container *ngTemplateOutlet="dishImg"></ng-container>
    </ng-container>
  </ng-container>
</ng-container>
</ng-container>


<ng-template #establishmentAv>
  <picture>
    <source srcset="{{host}}/-px100-{{pic.picCrop}}" media="(max-width: 400px)">
    <source srcset="{{host}}/-px150-{{pic.picCrop}}" media="(max-width: 680px)">
    <img class="img" srcset="{{host}}/{{pic.picCrop}}">
  </picture>
</ng-template>


<ng-template #establishmentBg>
  <picture>
    <source srcset="{{host}}/-px400-{{pic.picCrop}}" media="(max-width: 400px)">
    <source srcset="{{host}}/-px768-{{pic.picCrop}}" media="(max-width: 768px)">
    <img class="img" srcset="{{host}}/{{pic.picCrop}}">
  </picture>
</ng-template>

<ng-template #userBg>
  <picture>
    <source srcset="{{host}}/-px400-{{pic.picCrop}}" media="(max-width: 400px)">
    <source srcset="{{host}}/-px768-{{pic.picCrop}}" media="(max-width: 768px)">
    <img srcset="{{host}}/{{pic.picCrop}}">
  </picture>
</ng-template>


<ng-template #userPhoto>
  <picture>
    <source srcset="{{host}}/-px100-{{pic.picCrop}}" media="(max-width: 400px)">
    <source srcset="{{host}}/-px150-{{pic.picCrop}}" media="(max-width: 680px)">
    <img srcset="{{host}}/{{pic.picCrop}}">
  </picture>
</ng-template>

<ng-template #postImg>
  <picture>
    <source srcset="{{host}}/-px400-{{pic.picCrop}}" media="(max-width: 430px)">
    <img class="img" srcset="{{host}}/-px768-{{pic.picCrop}}">
  </picture>
</ng-template>

<ng-template #dishImg>
  <picture>
    <source srcset="{{host}}/-px230-{{pic.picCrop}}" media="(max-width: 550px)">
    <img class="img" srcset="{{host}}/-px150-{{pic.picCrop}}">
  </picture>
</ng-template>

<ng-template #picCrop>
  <ng-container *ngIf="pic.picCrop && !pic.picCrop">
    <img class="img" src="{{host}}{{pic.picCrop}}">
  </ng-container>
</ng-template>

<ng-template #sizeTemp>
  <ng-container *ngIf="isString">
    <ng-container *ngIf="size == 'right-bar-g'">
      <picture>
        <source srcset="{{host}}/-px60-{{pic.picCrop}}" media="(min-width: 992px)">
        <img class="img img-content" srcset="{{host}}/-px200-{{pic.picCrop}}">
      </picture>
    </ng-container>
    <ng-container *ngIf="size == 'right-bar-d'">
      <picture>
        <source media="(max-width: 767px)" srcset="{{host}}/-px150-{{pic.picCrop}}">
        <source media="(max-width: 690px)" srcset="{{host}}/-px100-{{pic.picCrop}}">
        <source media="(max-width: 420px)" srcset="{{host}}/-px60-{{pic.picCrop}}">
        <img class="img" srcset="{{host}}/-px60-{{pic.picCrop}}">
      </picture>
    </ng-container>
    <ng-container *ngIf="size == 'right-bar-f'">
      <picture>
        <source media="(min-width: 992px)" srcset="{{host}}/-px60-{{pic.picCrop}}">
        <source media="(min-width: 900px)" srcset="{{host}}/-px150-{{pic.picCrop}}">
        <source media="(min-width: 768px)" srcset="{{host}}/-px100-{{pic.picCrop}}">
        <source media="(min-width: 350px)" srcset="{{host}}/-px150-{{pic.picCrop}}">
        <source media="(max-width: 349px)" srcset="{{host}}/-px100-{{pic.picCrop}}">
        <img class="img" srcset="{{host}}/{{pic.picCrop}}">
      </picture>
    </ng-container>
  </ng-container>
  <ng-container *ngIf="!isString">
    <ng-container *ngIf="size && pic">
      <img class="img" srcset="{{host}}/-px{{size}}-{{pic.picCrop}}">
    </ng-container>
  </ng-container>
</ng-template>

